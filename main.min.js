(()=>{'use strict';const throttle =(fn,delay = 200)=>{let timeoutId = null;let lastExec = 0;return function throttled(...args){const now = Date.now();const remaining = delay -(now - lastExec);if(remaining <= 0){lastExec = now;if(timeoutId){clearTimeout(timeoutId);timeoutId = null}fn.apply(this,args)}else if(!timeoutId){timeoutId = setTimeout(()=>{lastExec = Date.now();timeoutId = null;fn.apply(this,args)},remaining)}}};function initPreloader(){window.addEventListener('load',()=>{const preloader = document.getElementById('preloader');if(!preloader)return;preloader.style.transition = 'opacity 0.5s ease';preloader.style.opacity = '0';setTimeout(()=> preloader.remove(),500)})}function initBeforeAfterCarousel(){const wrapper = document.getElementById('beforeAfterWrapper');if(!wrapper || wrapper.dataset.loopInitialized === 'true')return;const cards = Array.from(wrapper.querySelectorAll('.transformation-card'));const originalCount = cards.length;if(!originalCount)return;const fragment = document.createDocumentFragment();cards.forEach(card => fragment.appendChild(card.cloneNode(true)));wrapper.appendChild(fragment);wrapper.dataset.loopInitialized = 'true';wrapper.classList.add('is-loop-ready');const updateSettings =()=>{const firstCard = wrapper.querySelector('.transformation-card');if(!firstCard)return;const styles = window.getComputedStyle(wrapper);const gap = parseFloat(styles.gap || styles.columnGap || '0')|| 0;const cardWidth = firstCard.getBoundingClientRect().width;const translateDistance = -(originalCount *(cardWidth + gap));wrapper.style.setProperty('--before-after-translate',`${translateDistance}px`);const duration = window.innerWidth <= 768 ? 40:40;wrapper.style.setProperty('--before-after-duration',`${duration}s`)};updateSettings();window.addEventListener('resize',throttle(updateSettings,200));window.addEventListener('load',updateSettings)}function initTestimonialsCarousel(){const wrapper = document.getElementById('carouselWrapper');const container = document.querySelector('.carousel-container');const dotsContainer = document.getElementById('carouselDots');if(!wrapper || !container || !dotsContainer)return;const slides = Array.from(wrapper.querySelectorAll('.carousel-slide'));const totalSlides = slides.length;if(!totalSlides)return;let slidesToShow = window.innerWidth <= 768 ? 1:3;let currentIndex = 0;const maxIndex = Math.max(0,totalSlides - slidesToShow);let autoplay = null;function buildDots(){dotsContainer.innerHTML = '';for(let i = 0;i <= maxIndex;i += 1){const dot = document.createElement('button');dot.className = 'carousel-dot';if(i === 0)dot.classList.add('active');dot.setAttribute('aria-label',`Go to slide ${i + 1}`);dot.addEventListener('click',()=> goToSlide(i));dotsContainer.appendChild(dot)}}function updateCarousel(){const slideWidth = 100 / slidesToShow;wrapper.style.transform = `translateX(-${currentIndex * slideWidth}%)`;dotsContainer.querySelectorAll('.carousel-dot').forEach((dot,index)=>{dot.classList.toggle('active',index === currentIndex)})}function goToSlide(index){currentIndex = index;updateCarousel()}function moveCarousel(direction){currentIndex += direction;if(currentIndex < 0)currentIndex = maxIndex;if(currentIndex > maxIndex)currentIndex = 0;updateCarousel()}function handleResize(){const newSlidesToShow = window.innerWidth <= 768 ? 1:3;if(newSlidesToShow !== slidesToShow){slidesToShow = newSlidesToShow;currentIndex = 0;updateCarousel()}}function startAutoplay(){stopAutoplay();autoplay = setInterval(()=> moveCarousel(1),5000)}function stopAutoplay(){if(autoplay)clearInterval(autoplay);autoplay = null}buildDots();updateCarousel();startAutoplay();container.addEventListener('mouseenter',stopAutoplay);container.addEventListener('mouseleave',startAutoplay);window.addEventListener('resize',throttle(handleResize,150))}function initTimelineProgress(){const section = document.getElementById('whySection');const progressLine = document.getElementById('progressLine');if(!section || !progressLine)return;const updateProgressLine =()=>{const sectionRect = section.getBoundingClientRect();const windowHeight = window.innerHeight;const triggerPoint = windowHeight * 0.5;const sectionTop = sectionRect.top;const sectionHeight = sectionRect.height;if(sectionTop < triggerPoint){const scrolled = triggerPoint - sectionTop;const percentage =(scrolled / sectionHeight)* 100;progressLine.style.height = `${Math.min(100,Math.max(0,percentage))}%`}else{progressLine.style.height = '0%'}};const throttledUpdate = throttle(updateProgressLine,100);window.addEventListener('scroll',throttledUpdate,{passive:true});window.addEventListener('resize',throttle(updateProgressLine,200));window.addEventListener('load',updateProgressLine);updateProgressLine()}function initPricingCurrency(){const currencySelect=document.getElementById('currencySelect');const planCards=document.querySelectorAll('.pricing-card[data-plan-duration]');if(!currencySelect||!planCards.length)return;const pricingData={AED:{symbol:'AED',plans:{1:{total:1000,perWeek:233},3:{total:2700,perWeek:210},6:{total:4800,perWeek:187}}},EUR:{symbol:'â‚¬',plans:{1:{total:250,perWeek:58},3:{total:675,perWeek:52},6:{total:1200,perWeek:47}}},AUD:{symbol:'AUD',plans:{1:{total:480,perWeek:112},3:{total:1170,perWeek:91},6:{total:2400,perWeek:93}}}};const formatNumber=(value,decimals=0)=>value.toLocaleString('en-US',{minimumFractionDigits:decimals,maximumFractionDigits:decimals});const formatWeekly=value=>{const isInt=Number.isInteger(value);return formatNumber(value,isInt?0:1)};const updateCurrency=code=>{const config=pricingData[code]||pricingData.AED;const basePlan=config.plans[1];planCards.forEach(card=>{const duration=parseInt(card.dataset.planDuration,10);const plan=config.plans[duration];if(!plan||!basePlan)return;const totalEl=card.querySelector('[data-plan-total]');const weeklyEl=card.querySelector('[data-plan-monthly]');const savingEl=card.querySelector('[data-plan-saving]');if(totalEl)totalEl.textContent=`${formatNumber(plan.total)} ${config.symbol}`;if(weeklyEl)weeklyEl.textContent=`(${formatWeekly(plan.perWeek)} ${config.symbol}/week)`;if(savingEl){const savings=Math.max(0,basePlan.total*duration-plan.total);if(savings>0){savingEl.textContent=`Save ${formatNumber(savings)} ${config.symbol}`;savingEl.style.display='flex'}else{savingEl.textContent='';savingEl.style.display='none'}}})};currencySelect.addEventListener('change',event=>{updateCurrency(event.target.value)});updateCurrency(currencySelect.value)}function initCounter(){const counter = document.getElementById('clientsCounter');if(!counter)return;const animateCounter =()=>{const target = 150;let current = 0;const steps = 50;const increment = target / steps;const stepTime = 2000 / steps;const timer = setInterval(()=>{current += increment;if(current >= target){counter.textContent = target;clearInterval(timer)}else{counter.textContent = Math.floor(current)}},stepTime)};setTimeout(animateCounter,500)}function initFaqAccordion(){document.querySelectorAll('.faq-question').forEach(question =>{question.addEventListener('click',()=>{const faqItem = question.parentElement;const isActive = faqItem.classList.contains('active');document.querySelectorAll('.faq-item').forEach(item => item.classList.remove('active'));if(!isActive)faqItem.classList.add('active')})})}function initLazyLoading(){if('loading' in HTMLImageElement.prototype){document.querySelectorAll('img[loading="lazy"]').forEach(img =>{img.src = img.src})}else{const script = document.createElement('script');script.src = 'https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js';document.body.appendChild(script)}}document.addEventListener('DOMContentLoaded',()=>{initBeforeAfterCarousel();initTestimonialsCarousel();initTimelineProgress();initPricingCurrency();initCounter();initFaqAccordion();initLazyLoading()});initPreloader()})();